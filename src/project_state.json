{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 31,
  "summary": "Party ledger/mobile collection app with multi-user login (admin + staff), role-based permissions, party & payment/visit tracking (with visit date and optional GPS), Excel import, direct calling, notifications, dashboard with today’s visits/count/received amount, reports, branding header, and JSON export/import for on-device sharing.",
  "architectural_notes": [
    "Email invitation/sending is out of scope for now; proceed with admin-created users using admin-assigned credentials (ID/password).",
    "Decision: provide a one-tap admin password recovery path that sets the admin password to the default value \"rkbrothers.lts\" without requiring the old password; (per latest request) do not block the reset flow on Internet Identity checks in the UI.",
    "Admin password reset must be restricted to admin users only (no non-admin/staff-initiated reset)."
  ],
  "known_issues": [
    "Party Visit button is missing on the party/party details screen in the current draft; user expects it to be present to start the Party Visit flow.",
    "App is too slow; user reports it only loads the profile screen (possible hang/stall during app load/navigation).",
    "Updating shop name fails for non-admin users with: \"Unauthorized: Only admins can set shop branding\" (branding updates currently restricted to the admin principal).",
    "Admin/staff login: user cannot log in with admin ID \"rkbrothers.lts\" and cannot reset the admin password via the in-app Reset Admin Password flow (user forgot password; requests admin password be set to \"rkbrothers.lts\").",
    "Reset Admin Password flow appears to report success but the admin password is not actually reset (user still cannot log in after reset).",
    "After Draft Version 10 deployment, admin/staff login still fails with \"Invalid staff ID or password\" when using rkbrothers.lts / rkbrothers.lts (password reset not effectively applied).",
    "Login failure persists even with secondary admin credentials: user reports \"Incorrect ID/password\" when using ID \"rajan\" and password \"rajan\".",
    "After Draft Version 13 deployment, login with the secondary admin account \"rajan\" is still blocked/failing (user reports it remains blocked).",
    "User requests rebuilds/builds be faster (build/deploy iteration speed is currently too slow)."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-create-a-party-management-feature-that-supports-adding-viewing-editing-and-deleting-parties-with-fields-party-name-address-phone-pan-due-amount",
      "title": "Create a party management feature that supports adding, viewing, editing, and deleting parties with fields: Party Name, Address, Phone, PAN, Due Amount.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-excel-upload-import-flow-on-the-frontend-that-imports-parties-from-a-spreadsheet-with-columns-exactly-party-name-address-phone-pan-due-amount-and-persists-imported-parties-to-the-backend",
      "title": "Add an Excel upload/import flow on the frontend that imports parties from a spreadsheet with columns exactly: Party Name, Address, Phone, PAN, Due Amount, and persists imported parties to the backend.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-payment-recording-per-party-with-payment-amount-e-g-2000-comment-payment-date-time-and-next-payment-date-enforce-that-when-payment-amount-is-0-next-payment-date-is-required",
      "title": "Implement payment recording per party with: payment amount (e.g., ₹2000), comment, payment date/time, and next payment date; enforce that when payment amount is 0, next payment date is required.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-per-party-reports-view-that-shows-the-latest-payment-amount-latest-comment-next-payment-date-and-a-full-list-history-of-payments-for-the-selected-party",
      "title": "Add a per-party reports view that shows the latest payment amount, latest comment, next payment date, and a full list/history of payments for the selected party.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-direct-call-action-for-a-party-phone-number-that-initiates-a-phone-call-using-the-device-s-dialer-when-supported-via-a-tel-link",
      "title": "Add a direct call action for a party phone number that initiates a phone call using the device’s dialer when supported (via a tel: link).",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-on-app-open-check-for-any-parties-whose-next-payment-date-is-today-and-show-an-in-app-notification-alert-listing-those-parties",
      "title": "On app open, check for any parties whose next payment date is today and show an in-app notification/alert listing those parties.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-branding-header-area-at-the-top-of-the-app-that-displays-a-shop-name-and-a-logo-image-allow-the-user-to-set-update-the-shop-name-and-upload-replace-the-logo",
      "title": "Add a branding header area at the top of the app that displays a shop name and a logo image; allow the user to set/update the shop name and upload/replace the logo.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-add-data-export-import-as-json-to-enable-transferring-data-between-people-on-the-same-device-export-all-parties-payments-and-shop-branding-to-a-json-file-import-from-a-json-file-with-a-clear-overwrite-vs-merge-choice",
      "title": "Add data export/import as JSON to enable transferring data between people on the same device: export all parties, payments, and shop branding to a JSON file; import from a JSON file with a clear overwrite vs merge choice.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-apply-a-coherent-visual-theme-across-the-app-typography-spacing-components-and-layout-suitable-for-a-field-collections-party-ledger-workflow-keep-the-design-consistent-across-all-screens",
      "title": "Apply a coherent visual theme across the app (typography, spacing, components, and layout) suitable for a field collections/party ledger workflow; keep the design consistent across all screens.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-simplified-party-visit-action-on-the-party-details-screen-that-opens-a-visit-form-for-the-currently-viewed-party",
      "title": "Add a simplified “Party Visit” action on the Party Details screen that opens a visit form for the currently viewed party.",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-in-the-party-visit-form-auto-fill-today-s-date-time-and-attempt-to-auto-capture-the-device-location-using-the-browser-geolocation-api-with-a-simple-fallback-when-permission-is-denied-or-unavailable",
      "title": "In the Party Visit form, auto-fill today’s date/time and attempt to auto-capture the device location using the browser Geolocation API, with a simple fallback when permission is denied or unavailable.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-wire-the-party-visit-form-submission-to-create-a-new-record-for-the-party-using-the-existing-payment-recording-flow-amount-comment-payment-date-time-next-payment-date-including-location-when-available-and-show-a-success-message-plus-a-simple-next-payment-confirmation-when-next-payment-date-is-provided",
      "title": "Wire the Party Visit form submission to create a new record for the party using the existing payment recording flow (amount, comment, payment date/time, next payment date), including location when available, and show a success message plus a simple next-payment confirmation when next payment date is provided.",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-payment-visit-history-ui-to-display-the-saved-comment-when-present-and-optionally-a-simple-location-indicator-for-records-that-include-location",
      "title": "Update the payment/visit history UI to display the saved comment (when present) and (optionally) a simple location indicator for records that include location.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-party-details-page-clearly-shows-a-visible-action-to-start-the-party-visit-flow-a-button-labeled-party-visit-and-that-it-is-not-hidden-or-pushed-off-screen-on-smaller-mobile-layouts-clicking-the-button-must-open-the-existing-partyvisitformdialog-for-the-currently-viewed-party",
      "title": "Ensure the Party Details page clearly shows a visible action to start the Party Visit flow (a button labeled \"Party Visit\") and that it is not hidden or pushed off-screen on smaller/mobile layouts; clicking the button must open the existing PartyVisitFormDialog for the currently viewed party.",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-new-top-level-navigation-menu-item-labeled-new-party-visit-in-the-appshell-navigation-bar-so-users-can-start-a-party-visit-without-first-opening-party-details",
      "title": "Add a new top-level navigation menu item labeled \"New Party Visit\" in the AppShell navigation bar so users can start a party visit without first opening Party Details.",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-new-party-visit-screen-route-that-lets-the-user-select-an-existing-party-and-then-opens-the-existing-partyvisitformdialog-for-the-selected-party",
      "title": "Implement a \"New Party Visit\" screen/route that lets the user select an existing party and then opens the existing PartyVisitFormDialog for the selected party.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-prevent-the-app-from-getting-stuck-on-the-loading-profile-screen-by-handling-backend-actor-initialization-failures-in-the-actor-creation-hook-and-surfacing-a-recoverable-error-state-instead-of-leaving-the-app-in-an-unfetched-loading-state-indefinitely",
      "title": "Prevent the app from getting stuck on the “Loading profile...” screen by handling backend actor initialization failures in the actor-creation hook and surfacing a recoverable error state (instead of leaving the app in an unfetched/loading state indefinitely).",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-authenticated-app-bootstrap-flow-so-it-does-not-block-forever-on-the-profile-query-state-explicitly-handle-the-profile-query-error-case-and-show-a-clear-user-actionable-error-ui-with-retry-when-the-profile-fetch-fails",
      "title": "Update the authenticated app bootstrap flow so it does not block forever on the profile query state; explicitly handle the profile query error case and show a clear, user-actionable error UI (with retry) when the profile fetch fails.",
      "reqIds": [
        "REQ-20"
      ],
      "version": 1
    },
    {
      "id": "feature-reduce-perceived-slowness-during-login-by-ensuring-the-loading-profile-state-is-only-shown-when-a-real-fetch-is-in-progress-and-by-avoiding-redundant-refetch-cascades-on-startup-that-can-keep-the-app-in-a-loading-loop",
      "title": "Reduce perceived slowness during login by ensuring the “Loading profile...” state is only shown when a real fetch is in progress, and by avoiding redundant refetch cascades on startup that can keep the app in a loading loop.",
      "reqIds": [
        "REQ-21"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-partyvisitformdialog-to-include-a-visible-user-editable-visit-date-field-while-still-defaulting-to-the-current-date-time-when-the-dialog-opens-so-the-user-can-set-confirm-the-visit-date-before-submitting-the-party-visit",
      "title": "Update the PartyVisitFormDialog to include a visible, user-editable “Visit Date” field (while still defaulting to the current date/time when the dialog opens) so the user can set/confirm the visit date before submitting the party visit.",
      "reqIds": [
        "REQ-22"
      ],
      "version": 1
    },
    {
      "id": "feature-keep-the-existing-party-visit-validation-behavior-unchanged-when-the-payment-amount-is-0-next-payment-date-is-required-and-this-validation-must-still-work-correctly-when-the-visit-date-is-edited",
      "title": "Keep the existing Party Visit validation behavior unchanged: when the payment amount is 0, Next Payment Date is required, and this validation must still work correctly when the Visit Date is edited.",
      "reqIds": [
        "REQ-23"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-an-app-level-id-password-authentication-layer-managed-by-the-admin-user-admin-id-must-be-exactly-rkbrothers-lts-so-that-after-a-user-authenticates-with-internet-identity-they-must-also-authenticate-with-an-admin-assigned-id-password-to-access-app-features",
      "title": "Implement an app-level ID/password authentication layer managed by the admin user (admin ID must be exactly \"rkbrothers.lts\"), so that after a user authenticates with Internet Identity they must also authenticate with an admin-assigned ID/password to access app features.",
      "reqIds": [
        "REQ-24"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-role-based-permissions-controlled-by-the-admin-for-staff-users-including-at-minimum-a-permission-that-controls-whether-a-staff-user-can-view-all-parties-and-visit-payment-records-vs-being-restricted-as-configured-by-the-admin",
      "title": "Implement role-based permissions controlled by the admin for staff users, including at minimum a permission that controls whether a staff user can view all parties and visit/payment records vs being restricted (as configured by the admin).",
      "reqIds": [
        "REQ-26"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-admin-ui-in-settings-or-a-dedicated-admin-area-for-managing-staff-accounts-and-their-permissions-create-staff-id-password-reset-password-enable-disable-and-set-permissions",
      "title": "Add an admin UI (in Settings or a dedicated Admin area) for managing staff accounts and their permissions (create staff ID/password, reset password, enable/disable, and set permissions).",
      "reqIds": [
        "REQ-27"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-main-dashboard-screen-that-shows-today-s-party-visits-list-today-s-visit-count-and-today-s-received-amount-total-clicking-a-visit-entry-opens-a-details-view-for-that-visit-and-includes-a-direct-call-action-when-a-phone-number-is-available",
      "title": "Create a main Dashboard screen that shows today's party visits list, today's visit count, and today's received amount total; clicking a visit entry opens a details view for that visit and includes a direct call action when a phone number is available.",
      "reqIds": [
        "REQ-28"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-reset-admin-password-button-to-the-staff-login-screen-that-opens-a-dialog-allowing-the-admin-to-set-a-new-admin-password-for-login-name-rkbrothers-lts-and-submits-the-reset-via-the-new-backend-api",
      "title": "Add a “Reset Admin Password” button to the Staff Login screen that opens a dialog allowing the admin to set a new admin password (for login name \"rkbrothers.lts\") and submits the reset via the new backend API.",
      "reqIds": [
        "REQ-30"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-react-query-mutation-hook-for-resetting-the-admin-password-and-wire-it-into-the-staff-login-screen-reset-dialog",
      "title": "Add a React Query mutation hook for resetting the admin password and wire it into the Staff Login screen reset dialog.",
      "reqIds": [
        "REQ-31"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-staff-login-reset-admin-password-ui-to-provide-a-one-tap-option-to-set-the-admin-password-to-the-default-value-rkbrothers-lts-and-to-show-actionable-error-guidance-when-reset-is-blocked-by-missing-internet-identity-authentication-or-missing-admin-permissions",
      "title": "Update the Staff Login / Reset Admin Password UI to provide a one-tap option to set the admin password to the default value \"rkbrothers.lts\" and to show actionable error guidance when reset is blocked by missing Internet Identity authentication or missing admin permissions.",
      "reqIds": [
        "REQ-33"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-in-app-reset-admin-password-flow-only-shows-a-success-message-after-the-backend-has-truly-updated-the-admin-staff-account-password-for-login-name-rkbrothers-lts-and-the-new-password-can-be-used-to-successfully-authenticate-via-the-existing-staff-login-api",
      "title": "Ensure the in-app “Reset Admin Password” flow only shows a success message after the backend has truly updated the admin staff account password for login name \"rkbrothers.lts\", and the new password can be used to successfully authenticate via the existing staff login API.",
      "reqIds": [
        "REQ-34"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-reset-admin-password-mutation-logic-to-perform-a-post-reset-verification-step-using-existing-backend-apis-so-the-app-can-detect-and-report-cases-where-the-password-was-not-actually-applied-even-if-the-initial-call-appeared-to-succeed",
      "title": "Update the reset admin password mutation logic to perform a post-reset verification step (using existing backend APIs) so the app can detect and report cases where the password was not actually applied, even if the initial call appeared to succeed.",
      "reqIds": [
        "REQ-35"
      ],
      "version": 1
    },
    {
      "id": "feature-keep-the-existing-security-model-intact-for-admin-password-reset-resetting-the-admin-password-must-continue-to-require-a-valid-internet-identity-session-and-admin-permissions-do-not-add-an-unauthenticated-anyone-can-reset-admin-recovery-path",
      "title": "Keep the existing security model intact for admin password reset: resetting the admin password must continue to require a valid Internet Identity session and admin permissions; do not add an unauthenticated “anyone can reset admin” recovery path.",
      "reqIds": [
        "REQ-36"
      ],
      "version": 1
    },
    {
      "id": "feature-make-the-reset-admin-password-flow-reliably-effective-end-to-end-calling-the-backend-api-to-set-the-admin-password-must-actually-update-the-stored-password-for-rkbrothers-lts-and-the-subsequent-verification-login-must-succeed-when-the-password-is-correct",
      "title": "Make the Reset Admin Password flow reliably effective end-to-end: calling the backend API to set the admin password must actually update the stored password for \"rkbrothers.lts\", and the subsequent verification login must succeed when the password is correct.",
      "reqIds": [
        "REQ-39"
      ],
      "version": 1
    },
    {
      "id": "feature-treat-both-rkbrothers-lts-and-rajan-as-admin-staff-on-the-frontend-so-that-admin-only-ui-e-g-settings-admin-tab-is-visible-when-logged-in-with-either-admin-staff-id",
      "title": "Treat both \"rkbrothers.lts\" and \"rajan\" as admin staff on the frontend so that admin-only UI (e.g., Settings → Admin tab) is visible when logged in with either admin staff ID.",
      "reqIds": [
        "REQ-42"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-staff-login-ui-error-handling-to-show-a-clear-english-user-actionable-message-when-staff-login-fails-due-to-missing-internet-identity-authentication-vs-invalid-staff-id-password-vs-account-bound-to-different-internet-identity-so-the-user-can-understand-why-rajan-rajan-login-fails-when-it-does",
      "title": "Update the Staff Login UI error handling to show a clear, English, user-actionable message when staff login fails due to missing Internet Identity authentication vs invalid staff ID/password vs account-bound-to-different-Internet-Identity, so the user can understand why \"rajan\" / \"rajan\" login fails when it does.",
      "reqIds": [
        "REQ-46"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-staff-authentication-state-so-the-app-reliably-navigates-past-the-staff-login-screen-immediately-after-a-successful-staff-login-even-though-usestaffauth-is-called-from-multiple-components-e-g-appcontent-and-staffloginscreen-ensure-all-instances-of-usestaffauth-stay-in-sync-when-the-staff-session-is-created-or-cleared",
      "title": "Fix the staff authentication state so the app reliably navigates past the Staff Login screen immediately after a successful staff login, even though `useStaffAuth()` is called from multiple components (e.g., `AppContent` and `StaffLoginScreen`). Ensure all instances of `useStaffAuth` stay in sync when the staff session is created or cleared.",
      "reqIds": [
        "REQ-47"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-lightweight-user-visible-diagnostic-state-on-the-staff-login-screen-to-distinguish-between-a-successful-staff-authentication-that-is-followed-by-ui-state-not-updating-and-b-actual-authentication-failures-if-the-backend-returns-true-from-authenticatestaff-display-a-short-in-progress-message-english-like-login-successful-entering-app-while-transitioning-and-only-show-credential-errors-when-backend-returns-false-or-traps",
      "title": "Add a lightweight, user-visible diagnostic state on the Staff Login screen to distinguish between (a) successful staff authentication that is followed by UI state not updating, and (b) actual authentication failures. If the backend returns `true` from `authenticateStaff`, display a short in-progress message (English) like \"Login successful. Entering app...\" while transitioning, and only show credential errors when backend returns `false` or traps.",
      "reqIds": [
        "REQ-48"
      ],
      "version": 1
    },
    {
      "id": "feature-reduce-startup-latency-by-preventing-unnecessary-data-fetching-before-the-user-is-fully-authenticated-internet-identity-staff-login-including-gating-the-due-today-alert-logic-so-it-does-not-trigger-party-payment-queries-until-the-app-is-ready-to-show-main-content",
      "title": "Reduce startup latency by preventing unnecessary data fetching before the user is fully authenticated (Internet Identity + staff login), including gating the due-today alert logic so it does not trigger party/payment queries until the app is ready to show main content.",
      "reqIds": [
        "REQ-51"
      ],
      "version": 1
    },
    {
      "id": "feature-eliminate-redundant-actor-initialization-work-during-bootstrap-by-ensuring-actor-creation-initialization-is-performed-once-per-identity-session-and-shared-across-hooks-components-instead-of-multiple-hooks-each-performing-their-own-actor-readiness-initialization-checks",
      "title": "Eliminate redundant actor initialization work during bootstrap by ensuring actor creation/initialization is performed once per identity session and shared across hooks/components (instead of multiple hooks each performing their own actor readiness/initialization checks).",
      "reqIds": [
        "REQ-52"
      ],
      "version": 1
    },
    {
      "id": "feature-optimize-react-query-bootstrap-behavior-to-reduce-perceived-slowness-by-removing-avoiding-any-broad-query-invalidation-refetch-cascades-on-actor-readiness-and-by-tuning-startup-queries-so-they-do-not-refetch-repeatedly-during-initial-render",
      "title": "Optimize React Query bootstrap behavior to reduce perceived slowness by removing/avoiding any broad query invalidation/refetch cascades on actor readiness and by tuning startup queries so they do not refetch repeatedly during initial render.",
      "reqIds": [
        "REQ-53"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Party entry form (name, address, phone, PAN, due amount) with add/edit/delete and view full details",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Excel upload for parties with columns: Party Name, Address, Phone, PAN, Due Amount",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Record payment with amount, comment, and next payment date; if payment=0 then next payment date is required",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Auto location capture (GPS) for party creation/update and for each payment record",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Direct Call button for a party",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "On-open notification/alert when a party’s next payment date is today",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Reports: per-party view showing payment amount, comment, next date, plus full payment list/history",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Shop name and logo area at top of the app (branding header)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Export/import data as JSON on the same device to share between persons (data transfer)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-19",
      "summary": "Define and implement backend data models and APIs (single Motoko actor) for parties, payments, shop branding, and import/export JSON payloads, including server-side validation for required fields and the payment=0 next-date rule.",
      "reqIds": [
        "REQ-10"
      ],
      "status": "pending"
    },
    {
      "id": "AR-20",
      "summary": "Party Visit workflow: staff selects existing party, auto-captures GPS, shows party details and visit form (today’s date, payment amount, next payment date required if payment=0, comment), saves record, shows next-payment reminder and provides direct-call option",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-23",
      "summary": "Extend the backend payment/visit record data to persist the visit details needed by the Party Visit flow: comment text and optional captured location, while keeping the existing payment validation (when amount is 0, next payment date is required).",
      "reqIds": [
        "REQ-13"
      ],
      "status": "pending"
    },
    {
      "id": "AR-24",
      "summary": "Add a dedicated menu item/entry for starting a new Party Visit (\"New Party Visit\" menu) in addition to the Party Details action",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-25",
      "summary": "Party Visit: add a visible/editable Visit Date field (in addition to auto-filled date/time) so users can set/confirm the visit date",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-26",
      "summary": "Simple login with admin account (rkbrothers.lts) plus staff users created/managed by admin using admin-assigned ID/password (no email sending)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-27",
      "summary": "Role-based permissions: admin controls which data/features each user can view/access",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-28",
      "summary": "Main dashboard: show today’s visit list, total count of today’s visits, and today’s received amount; clicking an item shows visit details; include direct-call option",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-30",
      "summary": "Add backend support to allow the admin to create, update (including password reset), disable, and list staff login accounts (ID/password) and to bind each staff account to a specific Internet Identity Principal on first successful staff login.",
      "reqIds": [
        "REQ-25"
      ],
      "status": "pending"
    },
    {
      "id": "AR-31",
      "summary": "Add an in-app “Reset Admin Password” button/flow so the admin (rkbrothers.lts) can set a new admin password if forgotten",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-32",
      "summary": "Add a backend API that allows an Internet Identity admin principal to reset/set the admin staff account password for the fixed admin login name \"rkbrothers.lts\".",
      "reqIds": [
        "REQ-29"
      ],
      "status": "pending"
    },
    {
      "id": "AR-33",
      "summary": "Add a backend recovery API that allows resetting the fixed admin staff account password for login name \"rkbrothers.lts\" to the default password value \"rkbrothers.lts\" when the admin cannot log in, while preventing unauthorized takeovers.",
      "reqIds": [
        "REQ-32"
      ],
      "status": "pending"
    },
    {
      "id": "AR-34",
      "summary": "Ensure the admin staff account for login name \"rkbrothers.lts\" exists and can authenticate after deployments/upgrades, so that logging in with Staff ID \"rkbrothers.lts\" and password \"rkbrothers.lts\" does not return \"Invalid staff ID or password\" when the admin password was set/reset to that value.",
      "reqIds": [
        "REQ-37"
      ],
      "status": "pending"
    },
    {
      "id": "AR-35",
      "summary": "Persist staff account state across canister upgrades, including at minimum: loginName, password, boundPrincipal, isDisabled, and canViewAllRecords, so that staff/admin logins and prior bindings are not lost on redeploy.",
      "reqIds": [
        "REQ-38"
      ],
      "status": "pending"
    },
    {
      "id": "AR-36",
      "summary": "Support an additional admin login account (ID: \"rajan\", password: \"rajan\") alongside the fixed admin \"rkbrothers.lts\" (admin privileges, including ability to reset admin password)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-37",
      "summary": "Add a second built-in admin staff account with loginName \"rajan\" and password \"rajan\", with admin-level privileges (at minimum: canViewAllRecords=true and not disabled), in addition to the existing fixed admin staff account \"rkbrothers.lts\".",
      "reqIds": [
        "REQ-40"
      ],
      "status": "pending"
    },
    {
      "id": "AR-38",
      "summary": "Ensure the secondary admin staff account \"rajan\" remains available across canister upgrades by conditionally seeding/ensuring it on upgrade (without breaking existing stored staff account data).",
      "reqIds": [
        "REQ-41"
      ],
      "status": "pending"
    },
    {
      "id": "AR-40",
      "summary": "Keep the admin password reset flow restricted to admins only (no relaxation of permissions); the user-facing error message must remain in English and must clearly indicate that only an admin can reset the admin password.",
      "reqIds": [
        "REQ-43"
      ],
      "status": "pending"
    },
    {
      "id": "AR-41",
      "summary": "Ensure the backend always has a working built-in admin staff account with loginName \"rajan\" and password \"rajan\" (not disabled, canViewAllRecords=true), so that logging in with Staff ID \"rajan\" and Password \"rajan\" succeeds after the user is authenticated with Internet Identity.",
      "reqIds": [
        "REQ-44"
      ],
      "status": "pending"
    },
    {
      "id": "AR-42",
      "summary": "Ensure the backend always has a working built-in admin staff account with loginName \"rkbrothers.lts\" and a password that can be set via the existing admin reset flow, and ensure the staff account state needed for login is preserved across canister upgrades so admin/staff login does not break after redeployments.",
      "reqIds": [
        "REQ-45"
      ],
      "status": "pending"
    },
    {
      "id": "AR-45",
      "summary": "Ensure the backend always contains working built-in admin staff accounts for login names \"rkbrothers.lts\" and \"rajan\" so staff login is not blocked due to missing staff records after deployment/upgrade. If either account is missing at runtime, create it with defaults: `isDisabled=false`, `canViewAllRecords=true`, `boundPrincipal=null`, and password equal to the login name (\"rkbrothers.lts\" / \"rajan\").",
      "reqIds": [
        "REQ-49"
      ],
      "status": "pending"
    },
    {
      "id": "AR-46",
      "summary": "Persist staff account state across canister upgrades so staff/admin login does not break after redeployments. At minimum, persist: `loginName`, `password`, `boundPrincipal`, `isDisabled`, and `canViewAllRecords` for all staff accounts. Preserve existing data on upgrade and do not overwrite existing accounts when applying the built-in admin ensuring logic.",
      "reqIds": [
        "REQ-50"
      ],
      "status": "pending"
    },
    {
      "id": "AR-49",
      "summary": "Improve app performance/responsiveness (make the app faster, especially around startup/login/loading screens)",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Party Ledger",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}